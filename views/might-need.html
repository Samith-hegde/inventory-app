<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Genre Form</title>
    <style>
        .genre-field {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Add Genres</h1>
    <form id="genreForm" action="/submit-form" method="POST">
        <div id="genreFields">
            <div class="genre-field">
                <label for="genre1">Genre:</label>
                <input type="text" id="genre1" name="genres[]" placeholder="Enter a genre" required>
            </div>
        </div>
        <button type="submit">Submit</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const genreFields = document.getElementById('genreFields');
            let fieldCount = 1;

            function addNewField() {
                fieldCount++;
                const newField = document.createElement('div');
                newField.className = 'genre-field';
                newField.innerHTML = `
                    <label for="genre${fieldCount}">Genre:</label>
                    <input type="text" id="genre${fieldCount}" name="genres[]" placeholder="Enter a genre">
                `;
                genreFields.appendChild(newField);

                // Add event listener to the new field
                newField.querySelector('input').addEventListener('input', checkLastField);
            }

            function checkLastField() {
                const fields = document.querySelectorAll('.genre-field input');
                const lastField = fields[fields.length - 1];
                
                if (lastField.value.trim() !== '' && lastField === this) {
                    addNewField();
                }
            }

            // Add event listener to the initial field
            document.getElementById('genre1').addEventListener('input', checkLastField);
        });
    </script>
</body>
</html>